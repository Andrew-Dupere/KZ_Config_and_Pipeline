---
- name: kezan config
  hosts: kezan
  become: true  # Run tasks with sudo (root) privileges

  tasks:
  - name: Install operating system packages
    block:
    - name: Update apt package index
      apt:
        update_cache: yes
        cache_valid_time: 3600  # Optional: only update cache if older than 1 hour

    - name: Install Nginx package
      apt:
        name: nginx
        state: present

    - name: Ensure pip is installed
      apt:
        name: python3-pip
        state: present
    tags: [ 'os_packages' ]

  - name: Install Python packages
    block:
    - name: Install Gunicorn with pip
      pip:
        name: gunicorn
        state: present

    - name: Install BeautifulSoup with pip
      pip:
        name: beautifulsoup4  # Corrected the package name to 'beautifulsoup4'
        state: present
    tags: [ 'python_packages' ]
